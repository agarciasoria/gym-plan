<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Progress Tracker</title>
<link rel="stylesheet" href="../assets/styles.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<header class="site-header">
  <h1>Progress Tracker</h1>

  <input type="checkbox" id="menu-toggle" class="menu-toggle">
  <label for="menu-toggle" class="menu-icon">â˜°</label>
  <nav>
    <a href="../index.html">Home</a>
    <a href="../exercises/index.html">Exercises</a>
    <a href="progress.html">Progress Tracker</a>
  </nav>
</header>

<main class="container">
  <section>
    <h2>Record Your Workout</h2>
    <label for="workout">Select Workout:</label>
    <select id="workout">
      <option value="Day 1">Day 1</option>
      <option value="Day 2">Day 2</option>
    </select>

    <label for="exercise">Select Exercise:</label>
    <select id="exercise"></select>

    <label for="weight">Weight (kg):</label>
    <input type="number" id="weight" min="0">

    <label for="notes">Notes:</label>
    <textarea id="notes" rows="2"></textarea>

    <button id="save">Save Entry</button>
  </section>

  <section>
    <h2>Weight Progress</h2>
    <canvas id="chart" width="400" height="300"></canvas>
  </section>

  <section>
    <h2>Notes</h2>
    <ul id="notes-list"></ul>
  </section>
</main>

<script>
const workoutExercises = {
  "Day 1": ["Leg Press", "Chest Press", "Leg Curl", "Shoulder Press", "Abductor", "Seated Row"],
  "Day 2": ["Lat Pulldown", "Leg Extension", "Seated Row", "Glute Machine", "Bicep Curl", "Ab Crunch / Plank"]
};

const workoutSelect = document.getElementById('workout');
const exerciseSelect = document.getElementById('exercise');
const weightInput = document.getElementById('weight');
const notesInput = document.getElementById('notes');
const saveBtn = document.getElementById('save');
const notesList = document.getElementById('notes-list');
const ctx = document.getElementById('chart').getContext('2d');
let chart = new Chart(ctx, {type:'bar', data:{labels:[], datasets:[{label:'Weight (kg)', data:[], backgroundColor:'#2a7ae2'}]}, options:{responsive:true, scales:{y:{beginAtZero:true}}}});

function updateExerciseOptions(){
  const exercises = workoutExercises[workoutSelect.value];
  exerciseSelect.innerHTML = '';
  exercises.forEach(e => {
    const opt = document.createElement('option');
    opt.value = e;
    opt.textContent = e;
    exerciseSelect.appendChild(opt);
  });
  loadChart();
}

function loadChart(){
  const ex = exerciseSelect.value;
  const data = JSON.parse(localStorage.getItem('progress')||'[]').filter(x=>x.exercise===ex);
  chart.data.labels = data.map(d=>d.date);
  chart.data.datasets[0].data = data.map(d=>d.weight);
  chart.update();
  notesList.innerHTML = '';
  data.forEach(d=>notesList.innerHTML += `<li>${d.date}: ${d.weight}kg - ${d.notes||''}</li>`);
}

workoutSelect.addEventListener('change', updateExerciseOptions);
exerciseSelect.addEventListener('change', loadChart);
saveBtn.addEventListener('click',()=>{
  const entries = JSON.parse(localStorage.getItem('progress')||'[]');
  entries.push({date:new Date().toLocaleDateString(), workout:workoutSelect.value, exercise:exerciseSelect.value, weight:Number(weightInput.value), notes:notesInput.value});
  localStorage.setItem('progress', JSON.stringify(entries));
  weightInput.value=''; notesInput.value='';
  loadChart();
});

updateExerciseOptions();
</script>

</body>
</html>

